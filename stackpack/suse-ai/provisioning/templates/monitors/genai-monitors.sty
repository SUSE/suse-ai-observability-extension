  - _type: Monitor
    id: -3000
    name: GPU Node NVIDIA XID Errors
    identifier: urn:stackpack:suse-ai:shared:monitor:nvidia-xid-errors
    description: Indicates if a GPU Node is emitting an XID error for NVIDIA graphics cards.
    intervalSeconds: 60
    status: ENABLED
    function: {{ get "urn:stackpack:common:monitor-function:threshold" }}
    arguments:
      threshold: 1.0
      comparator: GTE
      failureState: CRITICAL
      metric:
        aliasTemplate: "XID Error ${err_code}"
        query: max by (err_code, err_msg, k8s_node_name) (max_over_time(DCGM_FI_DEV_XID_ERRORS[5m]))
        unit: short
      titleTemplate: "NVIDIA XID Error ${err_code} - ${err_msg}"
      urnTemplate: "urn:host:/${k8s_node_name}"

  - _type: Monitor
    id: -3001
    name: LLM GenAI System Metric Stream Active
    identifier: urn:stackpack:suse-ai:shared:monitor:genai-system-active
    description: Indicates if GenAI system metrics are being received.
    intervalSeconds: 60
    status: ENABLED
    function: {{ get "urn:stackpack:common:monitor-function:threshold" }}
    arguments:
      threshold: 1.0
      comparator: LTE
      failureState: DEVIATING
      metric:
        aliasTemplate: "Requests ${gen_ai_system}"
        query: sum(sum_over_time(gen_ai_requests_total{}[5m])) by (gen_ai_system)
        unit: short
      urnTemplate: "urn:stackpack:suse-ai:shared:component:genai-system:${gen_ai_system}"
