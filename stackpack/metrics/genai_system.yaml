nodes:
  - id: -100
    name: Requests per hour
    queries:
      - expression: sum(sum_over_time(gen_ai_requests_total{gen_ai_system="${name}"}[1h]))
        alias: Requests
        primary: true
    scope: (type in ("genai.system.ollama", "genai.system.openai"))
    identifier: urn:stackpack:openlit:shared:metric-binding:genai-system-total-requests
    unit: short
    chartType: line
    priority: high
    enabled: true
    layout:
      metricPerspective:
        tab: LLM
        section: Systems
      componentSummary:
        weight: 3
    _type: MetricBinding
  - id: -105
    name: Request Rate per second
    queries:
      - expression: sum(rate(gen_ai_requests_total{gen_ai_system="${name}"}[${__rate_interval}]))
        alias: Request Rate
        primary: true
    scope: (type in ("genai.system.ollama", "genai.system.openai"))
    identifier: urn:stackpack:openlit:shared:metric-binding:genai-system-request-rate
    unit: short
    chartType: line
    priority: high
    enabled: true
    layout:
      metricPerspective:
        tab: LLM
        section: Systems
      componentSummary:
        weight: 3
    _type: MetricBinding
  - id: -110
    name: Top models by usage
    queries:
      - expression: topk(5, sum by(gen_ai_request_model) (gen_ai_requests_total{gen_ai_system="${name}"}))
        alias: Model ${gen_ai_request_model}
        primary: true
    scope: (type in ("genai.system.ollama", "genai.system.openai"))
    identifier: urn:stackpack:openlit:shared:metric-binding:genai-system-top-models
    unit: short
    chartType: line
    priority: high
    enabled: true
    layout:
      metricPerspective:
        tab: LLM
        section: Systems
      componentSummary:
        weight: 3
    _type: MetricBinding
  - id: -120
    name: Average Token Consumption vs. Average Usage Cost Comparison
    queries:
      - expression: avg(gen_ai_usage_input_tokens_total{gen_ai_system="${name}"})
        alias: Prompt Tokens
      - expression: avg(gen_ai_usage_output_tokens_total{gen_ai_system="${name}"})
        alias: Completion Tokens
      - expression: avg(gen_ai_usage_cost_USD_bucket{gen_ai_system="${name}"})
        alias: Usage Dollar Cost
    scope: (type in ("genai.system.ollama", "genai.system.openai"))
    identifier: urn:stackpack:openlit:shared:metric-binding:genai-system-avg-tokens-per-total-requests
    unit: short
    chartType: line
    priority: high
    enabled: true
    layout:
      metricPerspective:
        tab: LLM
        section: Systems
      componentSummary:
        weight: 3
    _type: MetricBinding
  - id: -125
    name: Average Usage Cost
    queries:
      - expression: avg(gen_ai_usage_cost_USD_bucket{gen_ai_system="${name}"})
        alias: Usage Dollar Cost
    scope: (type in ("genai.system.ollama", "genai.system.openai"))
    identifier: urn:stackpack:openlit:shared:metric-binding:genai-system-avg-usage-cost
    unit: short
    chartType: line
    priority: high
    enabled: true
    layout:
      metricPerspective:
        tab: LLM
        section: Systems
      componentSummary:
        weight: 3
    _type: MetricBinding
  - id: -130
    name: Average TotalUsage Cost
    queries:
      - expression: avg(gen_ai_usage_cost_USD_sum{gen_ai_system="${name}"})
        alias: Usage Dollar Cost
    scope: (type in ("genai.system.ollama", "genai.system.openai"))
    identifier: urn:stackpack:openlit:shared:metric-binding:genai-system-avg-total-usage-cost
    unit: short
    chartType: line
    priority: high
    enabled: true
    layout:
      metricPerspective:
        tab: LLM
        section: Systems
      componentSummary:
        weight: 3
    _type: MetricBinding
  - id: -140
    name: Total Usage Tokens
    queries:
      - expression: sum(gen_ai_usage_tokens_total{gen_ai_system="${name}"})
        alias: Total Usage Tokens
    scope: (type in ("genai.system.ollama", "genai.system.openai"))
    identifier: urn:stackpack:openlit:shared:metric-binding:genai-system-total-usage-tokens
    unit: short
    chartType: line
    priority: high
    enabled: true
    layout:
      metricPerspective:
        tab: LLM
        section: Systems
      componentSummary:
        weight: 3
    _type: MetricBinding